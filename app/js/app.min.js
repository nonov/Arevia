"use strict";var arevia=angular.module("arevia",["ngRoute","areviaControllers","areviaServices","ngToast"]);arevia.config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{templateUrl:"/Arevia/app/partials/home.min.html",url:"/protected"}).when("/profil",{templateUrl:"/Arevia/app/partials/profil.min.html"}).when("/influences",{templateUrl:"/Arevia/app/partials/influences.min.html"}).when("/interventions",{templateUrl:"/Arevia/app/partials/interventions.min.html"}).when("/choisirArevia",{templateUrl:"/Arevia/app/partials/choisirArevia.min.html"}).when("/boutique",{templateUrl:"/Arevia/app/partials/boutique.min.html"}).when("/contact",{templateUrl:"/Arevia/app/partials/contact.min.html",controller:"ContactCtrl"}).when("/leMondeDArevia",{templateUrl:"/Arevia/app/partials/leMondeDArevia.min.html",controller:"BlogCtrl",resolve:{session:["SessionResolver",function(e){return e.resolve()}]},redirection:["AuthService",function(e){return e.isAuthenticated()?"/leMondeDArevia":void 0}]}).otherwise({redirectTo:"/"}),t.html5Mode(!1)}]).run(["$rootScope","AUTH_EVENTS","ARTICLE_EVENTS","FILE_EVENTS","POSTS_EVENTS","MAIL_EVENTS","ngToast","AuthService","$log","Session","$q","$location","$injector","$window",function(e,t,s,n,a,i,r,o,c,l,u,d,m){e.deferred=u.defer(),o.retrieveUser().then(function(s){e.currentUser=s,e.deferred.resolve(),e.$on("$routeChangeStart",function(s,n){if(e.loaded=!1,n&&n.data){var a=n.data.authorizedRoles;o.isAuthorized(a)||(s.preventDefault(),e.$broadcast(o.isAuthenticated()?t.notAuthorized:t.notAuthenticated))}})}),e.$on("$routeChangeSuccess",function(t,s){if(e.loaded=!0,s&&s.$$route){var n=s.$$route.redirection;if(n){var a=m.invoke(n);a&&d.path(a)}}}),e.$on(t.loginSuccess,function(){r.create({className:"success",content:"Bonjour , <strong>"+e.currentUser.login+"</strong> !"})}),e.$on(t.loginFailed,function(){r.create({className:"danger",content:"Erreur de connexion, merci de vérifier vos identifiants !"})}),e.$on(t.logoutSuccess,function(){r.create({className:"danger",content:"You are logged out !"})}),e.$on(s.postSuccess,function(){r.create({className:"success",content:"L'article vient d'être posté !"})}),e.$on(s.postFailed,function(){r.create({className:"warning",content:"Une erreur est survenue lors de la création de l'article, merci de réessayer !"})}),e.$on(s.deleteSuccess,function(){r.create({className:"success",content:"L'article a été supprimé !"})}),e.$on(s.deleteFailed,function(){r.create({className:"warning",content:"Une erreur est survenue lors de la suppression de l'article, réessayez !"})}),e.$on(a.postSuccess,function(){r.create({className:"success",content:"Votre commentaire vient d'être posté !"})}),e.$on(a.postFailed,function(){r.create({className:"warning",content:"Une erreur est survenue lors de la création de votre commentaire, merci de réessayer !"})}),e.$on(a.deleteSuccess,function(){r.create({className:"success",content:"Le commentaire a bien été supprimé !"})}),e.$on(a.deleteFailed,function(){r.create({className:"warning",content:"Une erreur est survenue lors de la suppression du commentaire, merci de réessayer !"})}),e.$on(i.sendSuccess,function(){r.create({className:"success",content:"Votre email vient d'être envoyé !"})}),e.$on(i.sendFailed,function(){r.create({className:"warning",content:"Une erreur est survenue lors de l'envoie de l'email, merci de réessayer !"})})}]),arevia.config(["ngToastProvider",function(e){e.configure({verticalPosition:"top",horizontalPosition:"center",maxNumber:2,animation:"slide",dismissOnClick:!0,dismissOnTimeout:!0,timeout:3e3})}]),arevia.constant("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",sessionTimeout:"auth-session-timeout"}).constant("ARTICLE_EVENTS",{postSuccess:"post-article-success",postFailed:"post-article-failed",deleteSuccess:"delete-article-success",deleteFailed:"delete-article-failed",selectSuccess:"select-article-success",selectFailed:"select-article-failed",deleteConfirmation:"delete-post-confirmation"}).constant("FILE_EVENTS",{uploadSuccess:"upload-file-success",uploadFailed:"upload-file-failed",deleteSuccess:"delete-file-success",deleteFailed:"delete-file-failed"}).constant("POSTS_EVENTS",{postSuccess:"post-com-success",postFailed:"post-com-failed",deleteSuccess:"delete-com-success",deleteFailed:"delete-com-failed"}).constant("MAIL_EVENTS",{sendSuccess:"send-mail-success",sendFailed:"send-mail-failed"});