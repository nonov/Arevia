"use strict";var arevia=angular.module("arevia",["ngRoute","areviaControllers","areviaServices","ngToast"]);arevia.config(["$routeProvider","$locationProvider",function(e,t){e.when("/",{templateUrl:"/Arevia/app/partials/home.html",url:"/protected"}).when("/profil",{templateUrl:"/Arevia/app/partials/profil.html"}).when("/influences",{templateUrl:"/Arevia/app/partials/influences.html"}).when("/interventions",{templateUrl:"/Arevia/app/partials/interventions.html"}).when("/choisirArevia",{templateUrl:"/Arevia/app/partials/choisirArevia.html"}).when("/boutique",{templateUrl:"/Arevia/app/partials/boutique.html"}).when("/contact",{templateUrl:"/Arevia/app/partials/contact.html"}).when("/leMondeDArevia",{templateUrl:"/Arevia/app/partials/leMondeDArevia.html",controller:"BlogCtrl",resolve:{session:["SessionResolver",function(e){return e.resolve()}]},redirection:["AuthService",function(e){return e.isAuthenticated()?"/leMondeDArevia":void 0}]}).otherwise({redirectTo:"/"}),t.html5Mode(!1)}]).run(["$rootScope","AUTH_EVENTS","ARTICLE_EVENTS","FILE_EVENTS","POSTS_EVENTS","ngToast","AuthService","$log","Session","$q","$location","$injector",function(e,t,s,a,n,r,o,i,c,l,u,d){e.deferred=l.defer(),o.retrieveUser().then(function(s){e.currentUser=s,e.deferred.resolve(),e.$on("$routeChangeStart",function(s,a){if(e.loaded=!1,a&&a.data){var n=a.data.authorizedRoles;o.isAuthorized(n)||(s.preventDefault(),e.$broadcast(o.isAuthenticated()?t.notAuthorized:t.notAuthenticated))}})}),e.$on("$routeChangeSuccess",function(t,s){if(e.loaded=!0,s&&s.$$route){var a=s.$$route.redirection;if(a){var n=d.invoke(a);n&&u.path(n)}}}),e.$on(t.loginSuccess,function(){r.create({className:"success",content:"Bonjour , <strong>"+e.currentUser.login+"</strong> !"})}),e.$on(t.loginFailed,function(){r.create({className:"danger",content:"Erreur de connexion, merci de vérifier vos identifiants !"})}),e.$on(t.logoutSuccess,function(){r.create({className:"danger",content:"You are logged out !"})}),e.$on(s.postSuccess,function(){r.create({className:"success",content:"L'article vient d'être posté !"})}),e.$on(s.postFailed,function(){r.create({className:"warning",content:"Une erreur est survenue lors de la création de l'article, merci de réessayer !"})}),e.$on(s.deleteSuccess,function(){r.create({className:"success",content:"L'article a été supprimé !"})}),e.$on(s.deleteFailed,function(){r.create({className:"warning",content:"Une erreur est survenue lors de la suppression de l'article, réessayez !"})}),e.$on(n.postSuccess,function(){r.create({className:"success",content:"Votre commentaire vient d'être posté !"})}),e.$on(n.postFailed,function(){r.create({className:"warning",content:"Une erreur est survenue lors de la création de votre commentaire, merci de réessayer !"})}),e.$on(n.deleteSuccess,function(){r.create({className:"success",content:"Le commentaire a bien été supprimé !"})}),e.$on(n.deleteFailed,function(){r.create({className:"warning",content:"Une erreur est survenue lors de la suppression du commentaire, merci de réessayer !"})})}]),arevia.config(["ngToastProvider",function(e){e.configure({verticalPosition:"top",horizontalPosition:"center",maxNumber:2,animation:"slide",dismissOnClick:!0,dismissOnTimeout:!0,timeout:3e3})}]),arevia.constant("AUTH_EVENTS",{loginSuccess:"auth-login-success",loginFailed:"auth-login-failed",logoutSuccess:"auth-logout-success",sessionTimeout:"auth-session-timeout"}).constant("ARTICLE_EVENTS",{postSuccess:"post-article-success",postFailed:"post-article-failed",deleteSuccess:"delete-article-success",deleteFailed:"delete-article-failed",selectSuccess:"select-article-success",selectFailed:"select-article-failed",deleteConfirmation:"delete-post-confirmation"}).constant("FILE_EVENTS",{uploadSuccess:"upload-file-success",uploadFailed:"upload-file-failed",deleteSuccess:"delete-file-success",deleteFailed:"delete-file-failed"}).constant("POSTS_EVENTS",{postSuccess:"post-com-success",postFailed:"post-com-failed",deleteSuccess:"delete-com-success",deleteFailed:"delete-com-failed"});